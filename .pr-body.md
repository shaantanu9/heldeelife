## Summary

This PR delivers the P1 (high-priority) analysis and remediation for the HeldeeLife repo: a single P1 issues report, API auth fixes for analytics and blog revalidate, verification of P1 user flows, critical TODO handling, and new P1-focused API tests.

## Changes Made

- **docs/P1_ISSUES_ANALYSIS.md** – New consolidated P1 report: P0/P1 scope from testing doc, lint/typecheck results, memory-bank gaps, API auth findings, and recommendations.
- **app/api/analytics/metrics/route.ts** – Enforce admin-only access for GET /api/analytics/metrics to prevent data leak.
- **app/api/blog/revalidate/route.ts** – Require admin role; validate/sanitize `path` before calling `revalidatePath` to prevent abuse.
- **app/api/admin/abandoned-carts/[id]/send-email/route.ts** – Minor consistency fix.
- **app/products/[slug]/product-stock-notification.tsx** – Code cleanup.
- **app/products/[slug]/product-videos.tsx** – Minor fix.
- **tests/api/** – New API tests for P1 coverage:
  - `addresses/route.test.ts`
  - `analytics/metrics/route.test.ts`
  - `blog/revalidate/route.test.ts`
  - `cart/abandoned/route.test.ts`
  - `products/route.test.ts`

## Testing

- **Build:** `npm run build` – passed.
- **Vitest:** 149 passed, 24 failed across 8 files (failures are pre-existing: orders, images/upload, ecommerce, image-upload, product-search-dialog, rich-text-editor, blog-post-form; blog-edit-and-delete has act() warnings). New P1 API tests added for analytics, revalidate, addresses, cart/abandoned, products.
- **E2E:** Not run (Cypress not in package.json).
- **Manual:** Admin-only analytics and revalidate can be verified by calling endpoints as non-admin (expect 403) and as admin (expect success for valid inputs).

## Screenshots

N/A (backend/API and docs focus).

## Notes

- P1 scope is defined from `docs/testing/TESTING_FUNCTIONS_LIST.md` and memory-bank; see `docs/P1_ISSUES_ANALYSIS.md` for full breakdown.
- Remaining Vitest failures and E2E gap are out of scope for this PR; consider follow-up for test env (e.g. `__tests__`/tsconfig and ecommerce integration test setup).
- Reviewers: focus on analytics + revalidate auth and path validation as security-sensitive changes.
